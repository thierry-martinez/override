(executable
  (name ppxlib_ast)
  (preprocess (staged_pps override ppxlib.metaquot ppx_deriving.eq))
  (libraries compiler-libs.common))

(rule
  (targets ppxlib_ast.ml)
  (deps ppxlib_ast.cppo.ml)
  (action
     (run %{bin:cppo} -V OCAML:%{ocaml_version} %{deps} -o %{targets})))

(rule
  (targets ppxlib_ast.mli)
  (deps ppxlib_ast.cppo.mli)
  (action
     (run %{bin:cppo} -V OCAML:%{ocaml_version} %{deps} -o %{targets})))